## Chapter01. 리팩터링 : 첫 번째 예시

### 개요

> 리팩터링이 필요한 이유는 '변경' 때문이다.

- 프로그램이 새로운 기능을 추가하기 편한 구조가 아니라면, 먼저 기능을 추가하기 쉬운 형태로 리팩터링하고 나서 원하는 기능을 추가한다.

### 리팩터링의 첫 단계

> 리팩터링 전에 제대로된 테스트부터 마련한다. 테스트는 반드시 자가진단하도록 만든다.

- 성공/실패를 판단하는 자가진단 테스트 만들기
- 신경써서 만들어두면 디버깅 시간이 줄어서 전체 작업시간은 오히려 단축된다!

### 함수 쪼개기

> 전체 동작을 각 부분으로 나눌 수 있는 지점을 찾는다.

### 리팩터링으로 인한 성능 문제

> 특별한 경우가 아니라면, 일단 무시하라

- 리팩터링 때문에 성능이 떨어진다면, 일단 하던 리팩터링을 마무리하고 나서 성능을 개선핮자.

### 변수 제거하기

> 단계를 나누고, 각 단계마다 컴파일-테스트-커밋을 반복한다.

1. 반복문 쪼개기
   - 변수값을 누적시키는 부분을 분리
2. 문장 슬라이드하기
   - 변수 초기화 문장을 변수값 누적코드 바로 앞으로 옮김
3. 함수 추출
   - 해당 부분을 별도 함수로 추출
4. 변수 인라인
   - 변수를 제거

### 불변 데이터

> 객체를 복사해서 인자로 건넨 이유는, 데이터를 수정하기 싫어서다.

- 가변(mutable)데이터는 금방 상하기 때문에, 데이터를 최대한 불변(immutable)처럼 취급한다.
- `Object.assign()` : 얕은 복사
